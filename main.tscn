[gd_scene load_steps=18 format=3 uid="uid://dkk0f5wj0at7x"]

[ext_resource type="Script" uid="uid://ca12wqpejflj" path="res://main.gd" id="1_efxa6"]
[ext_resource type="PackedScene" uid="uid://cjca6mx3264lj" path="res://scenes/player.tscn" id="1_ig7tw"]
[ext_resource type="Texture2D" uid="uid://dujcu7jcy8evu" path="res://assets/textures/texture_01.png" id="2_0xm2m"]
[ext_resource type="PackedScene" uid="uid://cun5hi2ne8vti" path="res://scenes/ui.tscn" id="5_7mycd"]
[ext_resource type="PackedScene" uid="uid://bhw884mxsuvea" path="res://scenes/knight.tscn" id="5_lquwl"]
[ext_resource type="PackedScene" uid="uid://dyugdxrsv73ma" path="res://scenes/dog_small.tscn" id="6_7mycd"]
[ext_resource type="PackedScene" uid="uid://0xnk1iydrnbm" path="res://scenes/giant.tscn" id="6_272bh"]
[ext_resource type="Script" uid="uid://dxg0yepbv63k0" path="res://addons/godot_state_charts/state_chart.gd" id="9_dg77c"]
[ext_resource type="Script" uid="uid://cwxxkh1jh6pp4" path="res://addons/godot_state_charts/compound_state.gd" id="10_ycdy4"]
[ext_resource type="Script" uid="uid://bitddddrhbl0d" path="res://addons/godot_state_charts/atomic_state.gd" id="11_w48qg"]
[ext_resource type="Script" uid="uid://knk6whqnftyj" path="res://addons/godot_state_charts/transition.gd" id="12_dg77c"]
[ext_resource type="PackedScene" uid="uid://bv37dfiqpjay6" path="res://scenes/spaceship.tscn" id="12_ycdy4"]
[ext_resource type="PackedScene" uid="uid://et8e2bm1xmp0" path="res://scenes/rock_guy.tscn" id="13_ycdy4"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_0xm2m"]
sky_horizon_color = Color(0.662243, 0.671743, 0.686743, 1)
ground_horizon_color = Color(0.662243, 0.671743, 0.686743, 1)

[sub_resource type="Sky" id="Sky_h2yge"]
sky_material = SubResource("ProceduralSkyMaterial_0xm2m")

[sub_resource type="Environment" id="Environment_1bvp3"]
background_mode = 2
sky = SubResource("Sky_h2yge")
tonemap_mode = 2
glow_enabled = true

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_h2yge"]
albedo_texture = ExtResource("2_0xm2m")

[node name="main" type="Node3D"]
script = ExtResource("1_efxa6")

[node name="UI" parent="." instance=ExtResource("5_7mycd")]

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_1bvp3")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(-0.866023, -0.433016, 0.250001, 0, 0.499998, 0.866027, -0.500003, 0.749999, -0.43301, 0, 0, 0)
shadow_enabled = true

[node name="Player" parent="." instance=ExtResource("1_ig7tw")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -93.7701, -396.964, 1106.84)

[node name="World" type="Node3D" parent="."]

[node name="CSGBox3D8" type="CSGBox3D" parent="World"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 31.6433, -206.467, -169.499)
material_override = SubResource("StandardMaterial3D_h2yge")
use_collision = true
size = Vector3(384, 393, 486)

[node name="CSGBox3D15" type="CSGBox3D" parent="World"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 181.643, -497.467, 1438.5)
material_override = SubResource("StandardMaterial3D_h2yge")
use_collision = true
size = Vector3(1374, 201, 1476)

[node name="CSGBox3D13" type="CSGBox3D" parent="World"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 21.1433, -209.467, 226.501)
material_override = SubResource("StandardMaterial3D_h2yge")
use_collision = true
size = Vector3(129, 141, 306)

[node name="CSGBox3D12" type="CSGBox3D" parent="World"]
transform = Transform3D(1, 0, 0, 0, 0.866025, -0.5, 0, 0.5, 0.866025, 21.1433, -236.916, 220.599)
material_override = SubResource("StandardMaterial3D_h2yge")
use_collision = true
size = Vector3(129, 240, 486)

[node name="CSGBox3D14" type="CSGBox3D" parent="World"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 21.1433, -308.467, 556.501)
material_override = SubResource("StandardMaterial3D_h2yge")
use_collision = true
size = Vector3(129, 141, 306)

[node name="CSGBox3D16" type="CSGBox3D" parent="World"]
transform = Transform3D(1, 0, 0, 0, 0.866025, -0.5, 0, 0.5, 0.866025, 21.1433, -365.916, 530.387)
material_override = SubResource("StandardMaterial3D_h2yge")
use_collision = true
size = Vector3(129, 240, 486)

[node name="CSGBox3D17" type="CSGBox3D" parent="World"]
transform = Transform3D(1, 0, 0, 0, 0.866025, -0.5, 0, 0.5, 0.866025, 21.1433, -462.516, 857.387)
material_override = SubResource("StandardMaterial3D_h2yge")
use_collision = true
size = Vector3(129, 240, 486)

[node name="CSGBox3D11" type="CSGBox3D" parent="World"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 16.6433, 82.8391, -181.499)
material_override = SubResource("StandardMaterial3D_h2yge")
use_collision = true
size = Vector3(258, 0.388672, 264)

[node name="CSGBox3D3" type="CSGBox3D" parent="World"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2.88024, 5.03344, -51.5297)
material_override = SubResource("StandardMaterial3D_h2yge")
use_collision = true
size = Vector3(10, 30, 10)

[node name="CSGBox3D6" type="CSGBox3D" parent="World"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 15.2012, 37.9409, -52.2178)
material_override = SubResource("StandardMaterial3D_h2yge")
use_collision = true
size = Vector3(264, 95.8149, 2.9436)

[node name="CSGBox3D10" type="CSGBox3D" parent="World"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 15.238, 37.9409, -310.218)
material_override = SubResource("StandardMaterial3D_h2yge")
use_collision = true
size = Vector3(264.074, 95.8149, 2.9436)

[node name="CSGBox3D7" type="CSGBox3D" parent="World"]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, 147.238, 37.9409, -181.218)
material_override = SubResource("StandardMaterial3D_h2yge")
use_collision = true
size = Vector3(264.074, 95.8149, 2.9436)

[node name="CSGBox3D9" type="CSGBox3D" parent="World"]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, -114, 39, -180)
material_override = SubResource("StandardMaterial3D_h2yge")
use_collision = true
size = Vector3(264.074, 95.8149, 2.9436)

[node name="CSGBox3D4" type="CSGBox3D" parent="World"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 37.0914, 5.03344, -51.5297)
material_override = SubResource("StandardMaterial3D_h2yge")
use_collision = true
size = Vector3(10, 30, 10)

[node name="CSGBox3D5" type="CSGBox3D" parent="World"]
transform = Transform3D(-4.37114e-08, -1, 0, 1, -4.37114e-08, 0, 0, 0, 1, 20.0216, 25.0334, -53.4402)
material_override = SubResource("StandardMaterial3D_h2yge")
use_collision = true
size = Vector3(10, 55.2651, 10)

[node name="DogSmall" parent="." instance=ExtResource("6_7mycd")]
transform = Transform3D(0.352446, 0, 0.935832, 0, 1, 0, -0.935832, 0, 0.352446, -163.308, -396.967, 1104.4)

[node name="DogSmall2" parent="." instance=ExtResource("6_7mycd")]
transform = Transform3D(0.882357, 0, 0.470581, 0, 1, 0, -0.470581, 0, 0.882357, -160.375, -396.967, 1102.95)

[node name="DogSmall3" parent="." instance=ExtResource("6_7mycd")]
transform = Transform3D(0.979628, 0, -0.200821, 0, 1, 0, 0.200821, 0, 0.979628, -155.949, -396.967, 1104.24)

[node name="Knight" parent="." instance=ExtResource("5_lquwl")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -78.1761, -396.967, 1065.61)

[node name="Knight3" parent="." instance=ExtResource("5_lquwl")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -139.128, -356.342, 1132.53)

[node name="Knight2" parent="." instance=ExtResource("5_lquwl")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -54.9907, -396.967, 1080.61)

[node name="Giant" parent="." instance=ExtResource("6_272bh")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -72.0348, -396.924, 1040.5)

[node name="CSGBox3D" type="CSGBox3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -134.855, -376.654, 1145.36)
use_collision = true
size = Vector3(25.3096, 40.6255, 42.5664)

[node name="CSGBox3D3" type="CSGBox3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -81.7105, -403.329, 1145.36)
use_collision = true
size = Vector3(25.3096, 40.6255, 42.5664)

[node name="CSGBox3D2" type="CSGBox3D" parent="."]
transform = Transform3D(0.612493, -0.790476, 0, 0.790476, 0.612493, 0, 0, 0, 1, -115.817, -387.097, 1161.88)
use_collision = true
size = Vector3(41.9825, 47.4768, 1.68872)

[node name="CSGBox3D4" type="CSGBox3D" parent="."]
transform = Transform3D(0, 0, 1, 0.790476, 0.612493, 7.71341e-09, -0.612493, 0.790476, 5.96046e-08, -81.3228, -414.649, 1119.87)
use_collision = true
size = Vector3(41.9825, 47.4768, 1.68872)

[node name="Spaceship" parent="." instance=ExtResource("12_ycdy4")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -60.7388, -396.967, 1127.57)

[node name="StateChart" type="Node" parent="."]
unique_name_in_owner = true
script = ExtResource("9_dg77c")
metadata/_custom_type_script = "uid://dxg0yepbv63k0"

[node name="CompoundState" type="Node" parent="StateChart"]
script = ExtResource("10_ycdy4")
initial_state = NodePath("Playing")
metadata/_custom_type_script = "uid://cwxxkh1jh6pp4"

[node name="Playing" type="Node" parent="StateChart/CompoundState"]
script = ExtResource("11_w48qg")
metadata/_custom_type_script = "uid://bitddddrhbl0d"

[node name="ToMenuMode" type="Node" parent="StateChart/CompoundState/Playing"]
script = ExtResource("12_dg77c")
to = NodePath("../../MenuMode")
event = &"to_menu"
delay_in_seconds = "0.0"
metadata/_custom_type_script = "uid://knk6whqnftyj"

[node name="ToGameOver" type="Node" parent="StateChart/CompoundState/Playing"]
script = ExtResource("12_dg77c")
to = NodePath("../../GameOver")
event = &"player_dead"
delay_in_seconds = "0.0"
metadata/_custom_type_script = "uid://knk6whqnftyj"

[node name="MenuMode" type="Node" parent="StateChart/CompoundState"]
script = ExtResource("11_w48qg")
metadata/_custom_type_script = "uid://bitddddrhbl0d"

[node name="ToPlaying" type="Node" parent="StateChart/CompoundState/MenuMode"]
script = ExtResource("12_dg77c")
to = NodePath("../../Playing")
event = &"to_playing"
delay_in_seconds = "0.0"
metadata/_custom_type_script = "uid://knk6whqnftyj"

[node name="GameOver" type="Node" parent="StateChart/CompoundState"]
script = ExtResource("11_w48qg")
metadata/_custom_type_script = "uid://bitddddrhbl0d"

[node name="ToPlaying" type="Node" parent="StateChart/CompoundState/GameOver"]
script = ExtResource("12_dg77c")
to = NodePath("../../Playing")
delay_in_seconds = "0.0"
metadata/_custom_type_script = "uid://knk6whqnftyj"

[node name="ItemRetrieved" type="Node" parent="StateChart/CompoundState"]
script = ExtResource("11_w48qg")
metadata/_custom_type_script = "uid://bitddddrhbl0d"

[node name="ToPlaying" type="Node" parent="StateChart/CompoundState/ItemRetrieved"]
script = ExtResource("12_dg77c")
to = NodePath("../../Playing")
delay_in_seconds = "0.0"

[node name="RockGuy" parent="." instance=ExtResource("13_ycdy4")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -91.8114, -396.964, 1093.38)

[connection signal="state_entered" from="StateChart/CompoundState/Playing" to="." method="_on_playing_state_entered"]
[connection signal="state_entered" from="StateChart/CompoundState/MenuMode" to="." method="_on_menu_mode_state_entered"]
