[gd_scene load_steps=6 format=3 uid="uid://dis5xffdkf7e6"]

[ext_resource type="Script" uid="uid://dptm6vhbkiitu" path="res://scripts/components/enemy_behaviour_component.gd" id="1_51ut1"]
[ext_resource type="Script" uid="uid://dxg0yepbv63k0" path="res://addons/godot_state_charts/state_chart.gd" id="2_ej6yh"]
[ext_resource type="Script" uid="uid://cwxxkh1jh6pp4" path="res://addons/godot_state_charts/compound_state.gd" id="3_v3goe"]
[ext_resource type="Script" uid="uid://bitddddrhbl0d" path="res://addons/godot_state_charts/atomic_state.gd" id="4_ch1o0"]
[ext_resource type="Script" uid="uid://knk6whqnftyj" path="res://addons/godot_state_charts/transition.gd" id="5_hkovr"]

[node name="EnemyBehaviourComponent" type="Node"]
script = ExtResource("1_51ut1")
antagonist_groups = Array[StringName]([&"player"])

[node name="StateChart" type="Node" parent="."]
unique_name_in_owner = true
script = ExtResource("2_ej6yh")
metadata/_custom_type_script = "uid://dxg0yepbv63k0"

[node name="MovingLogic" type="Node" parent="StateChart"]
script = ExtResource("3_v3goe")
initial_state = NodePath("Idle")
metadata/_custom_type_script = "uid://cwxxkh1jh6pp4"

[node name="Idle" type="Node" parent="StateChart/MovingLogic"]
script = ExtResource("4_ch1o0")

[node name="ToWalk" type="Node" parent="StateChart/MovingLogic/Idle"]
script = ExtResource("5_hkovr")
to = NodePath("../../Walk")
event = &"go_to_target"
delay_in_seconds = "0.0"

[node name="Walk" type="Node" parent="StateChart/MovingLogic"]
script = ExtResource("4_ch1o0")

[node name="ToAttack" type="Node" parent="StateChart/MovingLogic/Walk"]
script = ExtResource("5_hkovr")
to = NodePath("../../Attack")
event = &"attack"
delay_in_seconds = "0.5"

[node name="ToIdle" type="Node" parent="StateChart/MovingLogic/Walk"]
script = ExtResource("5_hkovr")
to = NodePath("../../Idle")
event = &"stop_moving"
delay_in_seconds = "0.0"
metadata/_custom_type_script = "uid://knk6whqnftyj"

[node name="Attack" type="Node" parent="StateChart/MovingLogic"]
script = ExtResource("4_ch1o0")

[node name="ToCooldown" type="Node" parent="StateChart/MovingLogic/Attack"]
script = ExtResource("5_hkovr")
to = NodePath("../../Walk")
delay_in_seconds = "1.5"

[connection signal="state_entered" from="StateChart/MovingLogic/Idle" to="." method="_on_idle_state_entered"]
[connection signal="state_physics_processing" from="StateChart/MovingLogic/Idle" to="." method="_on_idle_state_physics_processing"]
[connection signal="state_entered" from="StateChart/MovingLogic/Walk" to="." method="_on_walk_state_entered"]
[connection signal="state_physics_processing" from="StateChart/MovingLogic/Walk" to="." method="_on_walk_state_physics_processing"]
[connection signal="state_entered" from="StateChart/MovingLogic/Attack" to="." method="_on_attack_state_entered"]
[connection signal="state_exited" from="StateChart/MovingLogic/Attack" to="." method="_on_attack_state_exited"]
[connection signal="state_physics_processing" from="StateChart/MovingLogic/Attack" to="." method="_on_attack_state_physics_processing"]
