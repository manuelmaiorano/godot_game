[gd_resource type="BehaviorTree" load_steps=29 format=3 uid="uid://8bnuyn34db0p"]

[ext_resource type="Script" uid="uid://dfc34t1x6mr2d" path="res://ai/tasks/biteguy/attach.gd" id="1_y604q"]
[ext_resource type="Script" uid="uid://co3b640qc2sgl" path="res://ai/tasks/rollguy/attack_target_rollguy.gd" id="2_y604q"]
[ext_resource type="Script" uid="uid://0iyt8orb6i2p" path="res://ai/tasks/general/investigate_position.gd" id="3_ci6v3"]
[ext_resource type="Script" uid="uid://cf3ajn1p71af3" path="res://ai/tasks/general/stand_idle.gd" id="4_go5tb"]
[ext_resource type="Script" uid="uid://ctvf6ck11ej54" path="res://ai/tasks/general/go_to_next_patrol_point.gd" id="5_06vx3"]

[sub_resource type="BlackboardPlan" id="BlackboardPlan_apb05"]
var/is_attached/name = &"is_attached"
var/is_attached/type = 1
var/is_attached/value = false
var/is_attached/hint = 0
var/is_attached/hint_string = ""

[sub_resource type="BBVariant" id="BBVariant_ms1tu"]
type = 1
saved_value = true
resource_name = "true"

[sub_resource type="BTCheckVar" id="BTCheckVar_8yedm"]
variable = &"is_attached"
value = SubResource("BBVariant_ms1tu")

[sub_resource type="BTAction" id="BTAction_6wsb3"]
script = ExtResource("1_y604q")
attach_animation_state = &"roll"
follow_speed = 10.0

[sub_resource type="BTSequence" id="BTSequence_s37yr"]
custom_name = "AttachedToBigTarget"
children = [SubResource("BTCheckVar_8yedm"), SubResource("BTAction_6wsb3")]

[sub_resource type="BBVariant" id="BBVariant_de6g6"]
saved_value = null
resource_name = "<null>"

[sub_resource type="BTCheckVar" id="BTCheckVar_3g2au"]
variable = &"target"
check_type = 5
value = SubResource("BBVariant_de6g6")

[sub_resource type="BTAction" id="BTAction_xmijk"]
script = ExtResource("2_y604q")
move_anim_tree_state = &"run"
roll_anim_tree_state = &"roll"
distance_to_start_rolling = 10.0
distance_to_kill = 1.0

[sub_resource type="BTSequence" id="BTSequence_mhj6h"]
custom_name = "AttackTarget"
children = [SubResource("BTCheckVar_3g2au"), SubResource("BTAction_xmijk")]

[sub_resource type="BBVariant" id="BBVariant_sbaqa"]
saved_value = null
resource_name = "<null>"

[sub_resource type="BTCheckVar" id="BTCheckVar_rco11"]
variable = &"last_known_target_position"
check_type = 5
value = SubResource("BBVariant_sbaqa")

[sub_resource type="BTAction" id="BTAction_klxx8"]
script = ExtResource("3_ci6v3")
min_distance = 0.5
move_anim_tree_state = &"run"

[sub_resource type="BTAction" id="BTAction_wqi2n"]
script = ExtResource("4_go5tb")
idle_anim_tree_state = &"idle"

[sub_resource type="BTSequence" id="BTSequence_udyk7"]
children = [SubResource("BTAction_klxx8"), SubResource("BTAction_wqi2n")]

[sub_resource type="BTTimeLimit" id="BTTimeLimit_mpgib"]
time_limit = 10.0
children = [SubResource("BTSequence_udyk7")]

[sub_resource type="BTSequence" id="BTSequence_lue8v"]
custom_name = "InvestigateLastKnownPosition"
children = [SubResource("BTCheckVar_rco11"), SubResource("BTTimeLimit_mpgib")]

[sub_resource type="BTAction" id="BTAction_5mg1a"]
script = ExtResource("5_06vx3")
walk_anim_tree_state = &"run"
point_reach_distance = 0.1

[sub_resource type="BTAction" id="BTAction_d7fvw"]
script = ExtResource("4_go5tb")
idle_anim_tree_state = &"idle"

[sub_resource type="BTTimeLimit" id="BTTimeLimit_3nb1j"]
time_limit = 3.0
children = [SubResource("BTAction_d7fvw")]

[sub_resource type="BTSequence" id="BTSequence_grxsn"]
children = [SubResource("BTAction_5mg1a"), SubResource("BTTimeLimit_3nb1j")]

[sub_resource type="BTRepeat" id="BTRepeat_7wxly"]
forever = true
children = [SubResource("BTSequence_grxsn")]

[sub_resource type="BTSequence" id="BTSequence_l2w0h"]
custom_name = "Patrol"
children = [SubResource("BTRepeat_7wxly")]

[sub_resource type="BTDynamicSelector" id="BTDynamicSelector_gmr33"]
children = [SubResource("BTSequence_s37yr"), SubResource("BTSequence_mhj6h"), SubResource("BTSequence_lue8v"), SubResource("BTSequence_l2w0h")]

[resource]
blackboard_plan = SubResource("BlackboardPlan_apb05")
root_task = SubResource("BTDynamicSelector_gmr33")
